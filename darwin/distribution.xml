<?xml version="1.0" encoding="utf-8" standalone="no"?>
<installer-script minSpecVersion="1.000000">
    <localization>
        <strings language="en">
<![CDATA[
"NRP_TITLE" = "Nepali Romanized Pro";
"NRP_OLD_DETECT" = "An older version detected";
"NRP_OLD_DETECT_MSG" = "An older version of the keyboard layout already exists. This installer cannot continue.

Please manually delete :
- /Library/Keyboard Layouts/Nepali Romanized Pro.icns
- /Library/Keyboard Layouts/Nepali Romanized Pro.keylayout";
"NRP_PREV_DETECT" = "Previous installation detected";
"NRP_PREV_DETECT_MSG" = "A previous installation of the keyboard layout already exists. This installer will overwrite it.";
]]>
        </strings>
    </localization>
    <allowed-os-versions>
        <os-version min="10.10"/>
    </allowed-os-versions>
    <title>NRP_TITLE</title>
    <background mime-type="image/png" file="background.png" alignment="bottomleft" scaling="none"/>
    <background-darkAqua mime-type="image/png" file="background.png" alignment="bottomleft" scaling="none"/>
    <options customize="never" allow-external-scripts="no" rootVolumeOnly="true"/>

    <welcome language="en" mime-type="text/html"><![CDATA[<html><body><br />
<p style="margin: 0px; font: 14px 'Helvetica'">This installer will guide you through the process of installing the 'Nepali Romanized Pro' keyboard layout in your operating system.<br></br>You will need to log out, then log back in to use the layouts.</p></body></html>]]></welcome>
    <conclusion language="en" mime-type="text/html"><![CDATA[<html><body><br />
<p style="margin: 0px; font: 14px 'Helvetica'">'Nepali Romanized Pro' keyboard layout is now installed.<br></br>Please log out first, then log back in and visit the Keyboard Layouts panel in your System Preferences to see the newly installed layout.</p></body></html>]]></conclusion>
    <installation-check script="pre_install_check();"/>
    <script>
<![CDATA[
function pre_install_check() {
  if(system.files.fileExistsAtPath('/Library/Keyboard Layouts/Nepali Romanized Pro.keylayout')) {
      my.result.title = system.localizedString('NRP_OLD_DETECT');
      my.result.message = system.localizedString('NRP_OLD_DETECT_MSG');
      my.result.type = 'Fatal';
      return false;
  }
  if(system.files.fileExistsAtPath('/Library/Keyboard Layouts/np-rom-pro.keylayout')) {
      my.result.title = system.localizedString('NRP_PREV_DETECT');
      my.result.message = system.localizedString('NRP_PREV_DETECT_MSG');
      my.result.type = 'Warning';
      return false;
  }
  return true;
}
]]>
    </script>

    <choices-outline>
        <line choice="install"/>
    </choices-outline>
    <choice id="install" title="Nepali Romanized Pro">
        <pkg-ref id="__APP_PKG_ID__"/>
    </choice>
    <pkg-ref id="__APP_PKG_ID__" auth="Root">__APP_PKG_ID__.pkg</pkg-ref>
    <!-- onConclusion="RequireLogout" -->
</installer-script>
